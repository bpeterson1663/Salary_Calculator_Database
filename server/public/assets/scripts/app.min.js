/*! weekend_one_full_stack 2016-03-18 */
function submitButtonClicked(a){a.preventDefault();var b={};$.each($("#employeeInfo").serializeArray(),function(a,c){b[c.name]=c.value}),employees.push(b),console.log("Values Being sent to the server: ",b),$.ajax({type:"POST",data:b,url:"/addEmployee"}),$("#employeeInfo").find("input[type=text]").val(""),$("#employeeInfo").find("input[type=number]").val(""),calculateMonthly(),appendEmpInfo(),counter++,console.log(employees)}function calculateMonthly(){for(var a=0;a<employees.length;a++)var b=employees[a];totalMonthlyCost+=Math.round(parseInt(b.yearlysalary)/12),$("#monthlysalarycost").text(totalMonthlyCost)}function appendEmpInfo(){counter=employees.length-1;var a=employees[counter],b=a.yearlysalary,c='<tr class="employeeRow"><td>'+a.firstname+"</td><td>"+a.lastname+"</td><td>"+a.employeenumber+"</td><td>"+a.jobtitle+'</td><td class="salaryColumn">'+a.yearlysalary+'</td><td class="buttonColumn"><button class="deactivateEmployee" data-salary="'+b+'">DeActivate</button></td></tr>';$("#employeeData").append(c),$(".salaryColumn").data("salary",b)}function hideEmp(){var a=$(this).data("salary");console.log("Salary removed: ",a),$(this).closest(".employeeRow").addClass("fade"),$(this).closest(".buttonColumn").append('<button class="activateEmployee" data-salary="'+a+'">Activate</button>'),$(this).remove(),totalMonthlyCost-=a/12,$("#monthlysalarycost").text(totalMonthlyCost)}function activateEmp(){var a=$(this).data("salary");$(this).closest(".employeeRow").removeClass("fade"),$(this).closest(".buttonColumn").append('<button class="deactivateEmployee" data-salary="'+a+'">Deactivate</button>'),console.log("Salary Added: ",a),$(this).remove(),totalMonthlyCost+=a/12,$("#monthlysalarycost").text(totalMonthlyCost)}function initialAppend(){$.ajax({type:"GET",url:"/getEmployees",success:grabEmployees})}function grabEmployees(a){console.log("The response from the server on initial load is: ",a),a.forEach(function(a){employees.push(a);var b=a.yearly_salary;console.log("Employee Id is",a.id);var c='<tr class="employeeRow"><td>'+a.last_name+"</td><td>"+a.first_name+"</td><td>"+a.employee_number+"</td><td>"+a.job_title+'</td><td class="salaryColumn">'+a.yearly_salary+'</td><td class="buttonColumn"><button class="deactivateEmployee" data-salary="'+b+'">DeActivate</button></td></tr>';$("#employeeData").append(c),$(".salaryColumn").data("salary",b),totalMonthlyCost+=Math.round(parseInt(b)/12),console.log("The total monthly cost is",totalMonthlyCost),$("#monthlysalarycost").text(totalMonthlyCost)})}var employees=[],counter=0,classCounter=0,totalMonthlyCost=0;$(document).ready(function(){initialAppend(),$("#employeeInfo").on("submit",submitButtonClicked),$("#employeeData").on("click",".deactivateEmployee",hideEmp),$("#employeeData").on("click",".activateEmployee",activateEmp)});